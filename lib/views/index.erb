<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8"></meta>
  <title>Poefy Online</title>
  <link rel="shortcut icon" type="image/png" href="/favicon.png"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">
  <script language="javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script language="javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script language="javascript" src="poefy.js"></script>
  <script language="javascript">
    var welcomeText;
    var desc_databases = <%= @desc_databases.to_json %>;
    var poetic_forms   = <%= @poetic_forms.to_json %>;
  </script>
 </head>
 <body class="border">
  <header class="border">
    <div class="header_div">
      <div class="header_title input-group-lg">
        <span id="database_desc"></span>
      </div>
      <div class="header_left">
        <select id="dropdown_databases" class="form-control input-lg"
                onchange="selectDatabase(this.value)">
          <% @all_databases.each do |i| %>
            <option value="<%= i %>"><%= i %></option>
          <% end %>
        </select>
      </div>
      <div class="header_right">
        <a class="btn btn-default btn-lg" title="Fork me on GitHub"
            href="https://github.com/nossidge/poefy_online">
          <svg viewBox="0 0 16 15" width="22" height="18">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
          </svg>
        </a>
      </div>
    </div>
  </header>
  <div class="contents">
    <div id="col_left" class="col_left border">
      <div id="col_left_content">
        <a class="btn btn-default btn-lg btn-block btn_tags"
            title="Generate poem" onclick="getPoem()">
          <span id="save_glyphicon" class="glyphicon glyphicon-refresh"></span>
          Generate poem
        </a>
        <br>
        <p>Poetic form</p>
        <div class="input-group">
          <a id="poetic_form" title="Toggle" onclick="togglePoemType();"
              class="input-group-addon btn btn-default btn-lg btn-block btn_tags active">
            <span id="poetic_form_glyphicon" class="glyphicon glyphicon-ok"></span>
          </a>
          <select id="dropdown_poetic_forms" class="form-control input-lg"
                  onchange="getPoem()">
            <% @poetic_forms.keys.each do |i| %>
              <option value="<%= i %>"><%= i %></option>
            <% end %>
          </select>
        </div>
        <br>
        <div class="poem_option">
          <p>Rhyme scheme</p>
          <span class="tiny_hover_buttons">
            <a href="#" onclick="clearInput('#text_rhyme')" title="Clear field">x</a>
            <a href="#" onclick="randomisePoemOption('#text_rhyme')" title="Randomise">!</a>
            <a href="#" onclick="helpText('help_rhyme')" title="Display help">?</a>
          </span>
          <div class="input-group btn-block">
            <a id="rhyme" title="Toggle" onclick="togglePoemType();"
                class="input-group-addon btn btn-default btn-lg btn-block btn_tags">
              <span id="rhyme_glyphicon" class="glyphicon glyphicon-remove"></span>
            </a>
            <input id="text_rhyme" type="text" class="form-control input-lg" />
          </div>
        </div>
        <br>
        <div class="poem_option">
          <p>Indentation</p>
          <span class="tiny_hover_buttons">
            <a href="#" onclick="clearInput('#text_indent')" title="Clear field">x</a>
            <a href="#" onclick="randomisePoemOption('#text_indent')" title="Randomise">!</a>
            <a href="#" onclick="helpText('help_indentation')" title="Display help">?</a>
          </span>
          <div class="btn-block">
            <input id="text_indent" type="text" class="form-control input-lg" />
          </div>
        </div>
        <br>
        <div class="poem_option">
          <p>Syllables</p>
          <span class="tiny_hover_buttons">
            <a href="#" onclick="clearInput('#text_syllable')" title="Clear field">x</a>
            <a href="#" onclick="randomisePoemOption('#text_syllable')" title="Randomise">!</a>
            <a href="#" onclick="helpText('help_syllables')" title="Display help">?</a>
          </span>
          <div class="btn-block">
            <input id="text_syllable" type="text" class="form-control input-lg" />
          </div>
        </div>
        <br>
        <div class="poem_option">
          <p>Regex</p>
          <span class="tiny_hover_buttons">
            <a href="#" onclick="clearInput('#text_regex')" title="Clear field">x</a>
            <a href="#" onclick="randomisePoemOption('#text_regex')" title="Randomise">!</a>
            <a href="#" onclick="helpText('help_regex')" title="Display help">?</a>
          </span>
          <div class="btn-block">
            <input id="text_regex" type="text" class="form-control input-lg" />
          </div>
        </div>
        <br>
        <p>Acrostic</p>
        <div class="btn-block">
          <input id="text_acrostic" type="text" class="form-control input-lg" />
        </div>
      </div>
    </div>
    <div id="col_middle" class="col_middle border" name="poem_frame">
      <div id="poem_results">
        <div id="welcome_text" class="hidden">
          <p>Welcome to the online <a href="https://github.com/nossidge/poefy">Poefy</a> generator.</p>
          <p>Select the corpus database at the top.</p>
          <p>Then choose from the options on the left.</p>
          <p>For a new poem, click the 'refresh' button.</p>
          <br>
          <p>Project currently <a href="https://github.com/nossidge/poefy_online">in progress</a>.</p>
          <p>Most features are not yet implemented.</p>
        </div>
        <div id="help_rhyme" class="hidden">
          <h3>Rhyme scheme</h3>
          <p>Specifies a rhyme structure that the poem must follow. This is the most important argument; the whole poem is based on this. 'Rhyme scheme' and 'Poetic form' are mutually exclusive; if one field is selected the other will be automatically deselected.</p>
          <p>Each token in the rhyme string represents a line in the poem. Letters indicate rhymes, so all 'a' or 'A' lines have the same rhyme.</p>
          <p>Example, sonnet:</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  ababcdcdefefgg
            &nbsp;
            Towers of fables immortal fashion'd from mortal dreams!
            The colloquy there, the trio, each uttering,
            To sound of different, prouder songs, with stronger themes,
            Steady the roar of the gale, with incessant undertone muttering,
            I hear dervishes monotonously chanting, interspers'd with frantic
            from his cheeks,
            Pacific and the north Atlantic,
            Lo, Victress on the peaks,
            work-people at their meals,
            She does not tarry to smooth her hair nor adjust her cap.
            Was fill'd with aspirations high, unform'd ideals,
            and the climbing sap,
            Whence to arise inevitable in time, the towering roofs, the lamps,
            mighty camps.
          </pre>
          <p>Uppercase letter lines will be duplicated exactly. This is used to create refrain lines.</p>
          <p>Example, rondeau:</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  aabba aabC aabbaC
            &nbsp;
            An attendant follows holding a tray, he carries a refuse pail,
            speeds by under full sail.
            Gently, but with undeniable will, divesting myself of the holds that
            Grandmother, loving daughter, loving daughter's daughter, sat,
            O I do not know whether many passing by will discover you or inhale
            &nbsp;
            Here lands female and male,
            Appear'd the cloud, appear'd the long black trail,
            Or southward along the Tennessee or Cumberland rivers, or at
            What is yours is mine my father.
            &nbsp;
            bead-bags for sale,
            To her children the words of the eloquent dumb great mother never fail,
            cypresses growing out of the white sand that spreads far and flat,
            His glance is calm and commanding, he tosses the slouch of his hat
            what avail?
            What is yours is mine my father.
          </pre>
          <p>Numbers after a capital letter indicate which specific line to repeat. This is so you can have repeated lines that use the same rhyme scheme.</p>
          <p>Example, villanelle:</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  A1bA2 abA1 abA2 abA1 abA2 abA1A2
            Syllables:     6,7,8,9
            &nbsp;
            I saw old General at bay,
            Watching the east, the autumn sky.
            Put me down and depart on your way.
            &nbsp;
            When I Heard at the Close of the Day
            ever happier than I,
            I saw old General at bay,
            &nbsp;
            and interminable as they,
            looks at the oats and rye,
            Put me down and depart on your way.
            &nbsp;
            afternoon she went away,
            To One Shortly to Die
            I saw old General at bay,
            &nbsp;
            Hush'd be the camps to-day,
            These waifs from the deep, cast high and dry,
            Put me down and depart on your way.
            &nbsp;
            head, laughter, and naivete,
            (Pleas'd to my soul at death I cry,)
            I saw old General at bay,
            Put me down and depart on your way.
          </pre>
        </div>
        <div id="help_indentation" class="hidden">
          <h3>Indentation</h3>
          <p>Indent each line by a certain number of spaces.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        shakespeare
            Rhyme scheme:  abab aabb
            Indentation:   0101 0012
            &nbsp;
            O! what a mansion have those vices got
            &nbsp;&nbsp;And more, much more, than in my verse can sit,
            Nay, if you read this line, remember not
            &nbsp;&nbsp;For whether beauty, birth, or wealth, or wit,
            &nbsp;
            But what's so blessed-fair that fears no blot?
            Why should my heart think that a several plot,
            &nbsp;&nbsp;Thy merit hath my duty strongly knit,
            &nbsp;&nbsp;&nbsp;&nbsp;Your own glass shows you when you look in it.
          </pre>
          <p>Using '0' as the value resets all indents. You can use this to nullify the default indentation of a poetic form.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        dickinson
            Poetic form:   common
            Indentation:   0
            &nbsp;
            So busy was she, finishing,
            The bravest of the host,
            Though never yet, in any port,
            Bride of the Holy Ghost!
          </pre>
        </div>
        <div id="help_syllables" class="hidden">
          <h3>Syllables</h3>
          <p>Specify syllable count allowed for each line. There's a few valid forms it can take.</p>
          <p>If the string is just one number, all lines will be that number of syllables long.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  abab
            Syllables:     6
            &nbsp;
            Phantoms of countless lost,
            O darkness! O in vain!
            and silent there at last,
            friendship I take again.
          </pre>
          <p>If the string is comma delimited, all lines will be any of those numbers of syllables long.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  abab
            Syllables:     4,8,12
            &nbsp;
            This arm, this hand, this voice, have nourish'd, rais'd, restored,
            Give me the pay I have served for,
            his unsheath'd sword,
            be the stake, and respite no more.
          </pre>
          <p>If the string is an array encased in [square brackets], each element corresponds to a line in the output.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  aabba
            Syllables:     [8,8,5,5,8]
            &nbsp;
            Thus by blue Ontario's shore,
            Give me the pay I have served for,
            refuse, all attend,
            for my dearest friend,
            be the stake, and respite no more.
          </pre>
          <p>If the string is a hash encased in {curly brackets}, the key will be used to match the line number. You can use '=>' or ':' as the assignment symbol. Keys of '0' are used as the default value.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  aabba
            Syllables:     {0=>8,3=>5,4=>5}
            &nbsp;
            Sail out for Good, Eidolon Yacht!
            A glimpse through an interstice caught,
            Sit a while dear son,
            others for deeds done,
            I know very well I could not.
          </pre>
          <p>Values can be an exact integer syllable count, or an array of acceptable counts.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  aabba
            Syllables:     {0=>[8,9],3=>[4,5,6],4=>[4,5,6]}
            &nbsp;
            their flesh against me as I sat,
            and not hit, that which I hinted at;
            Poets to Come
            joints proportion'd and plumb.
            To be in any form, what is that?
          </pre>
          <p>Keys of negative integers count from the final line backwards.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Rhyme scheme:  aabba
            Syllables:     {0:4,-1:20}
            &nbsp;
            To-Day and Thee
            Far, far at sea,
            catching disease.
            toward the knees,
            I believe you are latent with unseen existences, you are so dear to me.
          </pre>
          <p>Using '0' as the value will ignore any syllable matching. You can use this to nullify the syllable constraints of a poetic form. So to get a random non-rhyming triplet, you could use the 'haiku' form with '0' as syllables.</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Poetic form:   haiku
            Syllables:     0
            &nbsp;
            Old Ireland
            How the flukes splash!
            O to resume the joys of the soldier!
          </pre>
        </div>
        <div id="help_regex" class="hidden">
          <h3>Regex</h3>
          <p>Specify a regular expression for lines to follow.</p>
          <p>If the string is just one regex, all lines will be forced to match that regex.</p>
          <p>Example, each line begins with a capital letter:</p>
          <pre onclick="exampleClick(this)">
            Corpus:        whitman
            Poetic form:   limerick
            Regex:         ^[A-Z]
            &nbsp;
            O heart-sick days! O nights of woe!
            As I wended the shores I know,
            The Voice of the Rain
            I am there again.
            To be lost if it must be so!
          </pre>
          <p>Example, no line contains the letter 'e':</p>
          <pre onclick="exampleClick(this)">
            Corpus:        dickinson
            Poetic form:   limerick
            Regex:         ^[^eE]*$
            Syllables:     0
            &nbsp;
            Convulsion playing round,
            A crash without a sound;
            Apart, intrinsic, stand,
            Or what Circassian land?
            Has anybody found?
          </pre>
          <p>If the string is a hash, the key will be used to match the line number, in much the same way as the syllables string. Unlike with syllables though, you must use ruby's => key identifier, and not : as in JSON. Also, you must put the regex inside /slashes/.</p>
          <p>A fairly complex example, to ensure all lines start with a capital letter, the last line ends with a full stop and all other lines end with a question mark:</p>
          <pre onclick="exampleClick(this)">
            Corpus:        shakespeare
            Rhyme scheme:  abab
            Regex:         {0=>/^[A-Z].*\?$/,-1=>/^[A-Z].*\.$/}
            Syllables:     10
            &nbsp;
            And what is't but mine own when I praise thee?
            Dost thou upon thy fading mansion spend?
            When thou art all the better part of me?
            In sequent toil all forwards do contend.
          </pre>
        </div>
      </div>
    </div>
  </div>
 </body>
</html>
